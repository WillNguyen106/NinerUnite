<%- include('../partials/header.ejs', {cs: 'bookDescriptionStyles'})%>
    <%if(user.id == domicile.user._id){%>
        <!--TODO: Display edit and delete button-->
    <%}%>
    <!--TODO: Image-->
    <div class="col-lg-6 p-3 d-flex align-items-center justify-content-center">
        <div class="border">
             <%if(domicile.image.length > 0){%>
                 

                 <!--carousel for showing multiple images-->

                 <div id="imageCarousel" data-bs-interval="false" class="carousel slide">
                     <!--this is where the images will be-->
                     <!--each carousel item is where an item can be placed-->
                     <div class="carousel-inner">
                         <!--the first image in the image array will have the active class-->
                         <!--every other image in the array will not-->
                         <%for (let i = 0; i < domicile.image.length; i++){ %>
                             <%if(domicile.image[i].data && i == 0){%>
                                 <div class="carousel-item active">
                                     <img class=" img-fluid w-75 imageCenter" src="data:<%=domicile.image[i].contentType%>;base64,
                                         <%=domicile.image[i].data.toString('base64')%>" alt="">
                                 </div>
                             <%} else if (domicile.image[i].data){%>
                                 <div class="carousel-item">
                                     <img class=" img-fluid w-75 imageCenter" src="data:<%=domicile.image[i].contentType%>;base64,
                                         <%=domicile.image[i].data.toString('base64')%>" alt="">
                                 </div>
                             <% } %>

                         <%}%>
                         
                     </div>
                     <!--carousel buttons-->
                     <!--background colors of buttons are blue because it is hard to see-->
                     <button class="carousel-control-prev" type="button" data-bs-target="#imageCarousel" data-bs-slide="prev">
                         <span class="carousel-control-prev-icon bg-primary" aria-hidden="true"></span>
                         <span class="visually-hidden">Previous</span>
                       </button>
                       <button class="carousel-control-next" type="button" data-bs-target="#imageCarousel" data-bs-slide="next">
                         <span class="carousel-control-next-icon bg-primary" aria-hidden="true"></span>
                         <span class="visually-hidden">Next</span>
                       </button>
                 </div>
             <%} else{%>
                 <!--TODO: modify this line-->
                 <img class="img-fluid" src="/images/other/noImageAvailable.png"> 
             <%}%>
        </div>
     </div>
    <p>Posted <%=domicile.createdAt%> by <%=domicile.user.firstName + ' ' + domicile.user.lastName%></p>
                <h3><%=domicile.title%></h3>
                <!--if the user is the owner of the post, they are able to edit and delete the post from show page-->
                <%if(user.id == domicile.user._id){%>
                    <form>
                        <button class="btn btn-success" type="submit" formmethod="GET" formaction="/domiciles/<%= id %>/edit"><i class="fas fa-edit"></i></button>
                        <!-- Button trigger modal for delete message -->
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#DeleteMessage">
                            <i class="fa fa-trash"></i>
                        </button>
                        
                        <!-- Modal for delete message -->
                        <div class="modal fade" id="DeleteMessage" tabindex="-1" aria-labelledby="DeleteMessageLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="DeleteMessageLabel"><%= domicile.title %></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="No"></button>
                                </div>
                                <div class="modal-body">
                                Are you sure you want to delete this post?
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                                <button type="submit" class="btn btn-primary" formmethod="POST" formaction="/domiciles/<%= id %>?_method=DELETE">Yes</button>
                                </div>
                            </div>
                            </div>
                        </div>
                    </form>
                <%}%>
                <hr>
                <p>Address: <%=domicile.address%></p>
                <p>Description: <%=domicile.description%></p>
                <p>Type: <%=domicile.type%></p>
                <p>Bedrooms: <%=domicile.bed%></p>
                <p>Bathrooms: <%=domicile.bath%></p>
                <p>Payment: <%=domicile.payment%></p>
                <p>Phone: <%=domicile.phone%></p>
                <p>Email: <%=domicile.email%></p>
 
                <!--no add to cart button necessary for domicile posts-->

<%- include('../partials/footer.ejs')%>