<%- include('../partials/header.ejs', {cs: 'listStyle'})%>

<div class="container p-3 ">
    <h1>Domicile List</h1>
    <br>
    <%if(domiciles.length){ %>
        <!--cards-->
        <%domiciles.forEach(domicile=>{%>
          
                <div class="cardStyle">

                    <a href="/domiciles/<%=domicile.id%>">
                        <div class="card mb-3 bg-light">
                            <div class="row ">
                            <!--image section-->
                            <div class="col-md-4 text-center">
                                <!--if there is at least one image in image array, the one at index[0]-->
                                <!--will be displayed-->
                                <% if(domicile.image.length > 0){%>
                                    <img id="thumbnailImg" class="img-fluid" src="data:<%=domicile.image[0].contentType%>;base64,
                                    <%=domicile.image[0].data.toString('base64')%>"> 
                                <!--if there is no image provided, default no image is provided-->
                                <%} else { %>
                                <img class="img-fluid" src="/images/other/noImageAvailable.png"> 
                                <%} %>
                            </div>
                            <!--domicile information-->
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h3 class="card-title"><%= domicile.title %></h3>
                                    <p class="card-text"><%= domicile.address %></p>
                                    <p class="card-text"><%= domicile.description %></p>
                                    <p class="card-text">Bed(s): <%= domicile.bed %> | Bath(s): <%= domicile.bath%></p>
                                    <p class="card-text">$<%= domicile.payment %></p>
                                </div>
                            </div>
                            </div>
                        </div>
                    </a> 

                </div>

        <% }); %>


        
        <%} else {%>
        <h2>There are no domiciles to display</h2>
    <%} %>
</div>

<%- include('../partials/footer.ejs')%>