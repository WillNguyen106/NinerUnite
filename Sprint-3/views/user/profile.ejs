<%- include('../partials/header.ejs', {cs: 'defaultstyle' })%>

    <!-- Primary Table for All Elements -->
    <div class="container flex-row w-50 text-center">
        <h3 class="fs-1 py-5 mb-5">My Profile</h3>

        <div class="row">
            <div class="col-md-6">

                <% if (profile.image.data) { %>
                    <img class=" img-fluid mb-3" max-height="400" src="data:<%=profile.image.contentType%>;base64,
                    <%=profile.image.data.toString('base64')%>" alt="">
                <%} else { %>
                    <img class="img-fluid border mb-3" src="/images/other/profiledefault.png"> 
                <% } %>
                    

            </div>

            <div class="col-md-6">

                <table>
                    <tr>
                        <td class="align-top ps-4">
                            <!-- Secondary Table for Account Information -->
                            <table class="table text-break">
                                <%if(profile) {%>
                                <tr>
                                    <th>First Name:</th>
                                    <td><%= profile.firstName%></td>
                                </tr>
                                <tr>
                                    <th>Last Name:</th>
                                    <td><%= profile.lastName%></td>
                                </tr>
                                <tr>
                                    <th>Email:</th>
                                    <td><%= profile.email%></td>
                                </tr>
                                <tr>
                                    <th>Phone:</th>
                                    <td><%= profile.phoneNum%></td>
                                </tr>
                                <tr>
                                    <th>About Me: </th>
                                    <% if(profile.biograph){ %>
                                        <td><%= profile.biograph%></td>
        
                                    <%} else {%>
                                        <td>You have not told us anything yet!</td>
                                    <%} %>
                                </tr>
                                <tr>
                                    <th>Number of posts:</th>
                                    <td><%- postNum%> posts</td>
                                </tr>
                                <%}%>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <%if(user.id == profile._id){%>
                        <form>
                            <td class="pt-4"><!-- Buttons to Change Account Details -->
                                <button class="btn btn-secondary btn-lg text-end m-1" type="submit" formmethod="GET" formaction="/users/<%= profile.id %>/edit">Update</button>
                                <!-- <button class="btn btn-danger btn-lg text-end m-1" type="submit">Delete</button> -->
                            </td>
                        </form>
                        <%}%>
                    </tr>
                </table>

            </div>

        </div>


    </div>



    <%- include('../partials/footer.ejs')%>